<script>
    function sendMessage() {
        let inputField = document.getElementById("user-input");
        let message = inputField.value.trim();
        if (message === "") return;

        addMessage(message, "user");
        inputField.value = "";

        setTimeout(() => {
            addMessage("Thinking...", "bot");
            fetch("/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message })
            })
            .then(response => response.json())
            .then(data => {
                document.querySelector(".bot:last-child").remove();
                addMessage(data.response, "bot");
            });
        }, 500);
    }

    function addMessage(text, sender) {
        let chatBox = document.getElementById("chat-box");
        let msgDiv = document.createElement("div");
        msgDiv.classList.add("message", sender);
        msgDiv.innerText = text;
        chatBox.appendChild(msgDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }
</script>
